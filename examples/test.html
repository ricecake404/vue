<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vue Test</title>
</head>
<body>
<div id="app">
  <button @click="addOne">+1</button>
  <button @click="addOneField">addOneField</button>
  <button @click="addOneInArrEle">addOneInArrEle</button>
  <button @click="addOneEleInArr">addOneEleInArr</button>
  <button @click="addOneFieldInArrEle">addOneFieldInArrEle</button>
  <div>
    {{ JSON.stringify(obj1, null, 2) }}
  </div>
</div>
<script src="../dist/vue.js"></script>
<script>
  // debugger
  new Vue({
    el: '#app',
    data: {
      obj1: {
        str1: 'string1',
        obj2: {
          str2: 'string2',
          number1: 1
        },
        arr1: [{number21: 21}, {number22: 22}]
      }
    },
    methods: {
      addOne() {
        this.obj1.obj2.number1++
      },
      addOneField() {
        // set directly will not update
        // this.obj1.obj2['number-1-'+Math.random()] = Math.random()
        this.$set(this.obj1.obj2, 'number-2-'+Math.random(), Math.random())
      },
      addOneFieldInArrEle() {
        this.$set(this.obj1.arr1[0], 'number-11-'+Math.random(), Math.random())
      },
      addOneInArrEle() {
        this.obj1.arr1[0].number21++
      },
      addOneEleInArr() {
        this.obj1.arr1.push({['number2-'+Math.random()]: Math.random()})
      }
    },
    watch: {
      'obj1.obj2': {
        handler(val) {
          // console.log('changed', val)
        }
      },
      'obj1.arr1': {
        handler(val) {
          // console.log('changed', val)
        }
      },
      'obj1.obj2.str2': {
        handler(val) {
          // console.log('changed', val)
        }
      }
    }
  })
</script>
</body>
</html>
